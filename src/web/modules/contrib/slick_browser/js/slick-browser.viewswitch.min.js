!function(c,e,i){"use strict";var s="viewswitch",d="sb__"+s,l="sb-"+s,v=d+"--on",a="."+d+":not(."+v+")",g="is-sb-active",h="is-sb-info-active",b=".view-list--header",f=".button",u="view--sb-help",w=".pager__items",p=".grid",_=e.blazy||null;function t(e){var s,t,r,i=c(e),l=i.closest(".form--sb"),a=l.length?l:i.closest(".view"),n=c(".sb__header"),o=a.find(".blazy--grid:first"),l=o.attr("class");i.data("classes",l),t=c(".view-content",a),a.find(p).length&&!c(b,a).length&&((s=o.find(p+":first .grid__content").clone()).detach().insertBefore(t),s.closest(b).length||s.wrapAll('<div class="view-list view-list--header grid" />'),s.find(".views-field").each(function(){var e=c(this),s=e.find(".views-label").text();e.empty().text(s)}),s.find(".grid__info, .button-group").remove()),n.length&&(n.find("."+d).remove(),i.addClass(d+"--header").appendTo(n)),c(f,e).on("click.sbSwitch",function(e){e.preventDefault();var s=c(e.currentTarget),t=s.data("target"),e=c(".view--sb");s.closest(".button-group").find(f).removeClass(g),s.addClass(g),t&&e.length&&(c("."+h).removeClass(h),"help"===t?(a.removeClass("is-sb-collapsed"),a.toggleClass(u),s.text(a.hasClass(u)?"x":"?")):(c(".button--help",a).text("?"),a.removeClass(u),e.removeClass("view--sb-grid view--sb-list view--sb-help"),e.find(".blazy--grid").attr("class","list"===t?"sb__grid":i.data("classes")),e.addClass("view--sb-"+t),_&&null!==_.init&&_.init.revalidate(!0)))}),c("#sb-viewswitch",a).find(".button--view."+g).click(),c(".slick__arrow",r=a).addClass("button-group button-group--icon"),c(".slick__slider",r).on("beforeChange",function(e,s,t){var i=s.$slides.length,l=t+1,a=c(w+' a[rel="next"]',r),n=c(w+' a[rel="prev"]',r),s=c(w+" .pager__item--next a",r),t=c(w+" .pager__item--previous a",r);l===i&&(a.length?a.click():n.length&&n.click(),s.length?s.click():t.length&&t.click())}),i.addClass(v)}e.slickBrowser=e.slickBrowser||{},e.behaviors.slickBrowserViewSwitch={attach:function(e){i.once(t,l,a,e)},detach:function(e,s,t){"unload"===t&&i.once.removeSafely(l,a,e)}}}(jQuery,Drupal,dBlazy);
